Link:
  type: object
  properties:
    href:
      type: string     
    type:
      type: string
Links:
  type: object
  properties:
    'self':
      $ref: '#/definitions/Link'
Webhook:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _id:
      type: string
      description: the ID of the webhook resource
    url:
      type: string
      description: The URL of the remote webhook
      example: https://example.com/example
    secret:
      type: string
      description: If defined, the webhooks post request will include a X-LD-Signature header whose value will contain an HMAC SHA256 hex digest of the webhook payload, using the secret as the key
    on:
      type: boolean
      description: Whether this webhook is enabled or not
      example: true
    tags:
      type: array
      description: Tags assigned to this webhook
      items: 
        type: string
Webhooks:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: array
      items:
        $ref: '#/definitions/Webhook'
FeatureFlag:
  type: object
  properties:
    key:
      type: string
      example: bob@example.com
    name:
      type: string
      description: Name of the feature flag
      example: test-feature
    kind:
      type: string
      description: Whether the feature flag is a boolean flag or multivariate.
      example: boolean
    creationDate:
      type: number
      format: int64
      description: A unix epoch time in milliseconds specifying the creation time of this flag.
      example: 1443652232590
    includeInSnippet:
      type: boolean
      example: false
    temporary:
      type: boolean
      description: Whether or not this flag is temporary.
      example: false
    maintainerId:
      type: string
      description: The ID of the member that should maintain this flag.
      example: 561c579cd8fd5c2704000001
    tags: 
      type: array
      description: An array of tags for this feature flag.
      items:
        type: string
      example: '[]'
    variations:
      type: array
      description: The variations for this feature flag.
      items:
        $ref: '#/definitions/Variation'
      example: '[ { "value": "a" }, { "value": "b" } ]'
    _links:
      $ref: '#/definitions/Links'
    _maintainer:
      $ref: '#/definitions/Member'
    environments:
      type: object
      additionalProperties:
        $ref: '#/definitions/FeatureFlagConfig'
FeatureFlags:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: array
      items:
        $ref: '#/definitions/FeatureFlag'
Member:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _id:
      type: string
    role:
      $ref: '#/definitions/Role'
    email: 
      type: string
    _pendingInvite: 
      type: boolean
    isBeta:
      type: boolean
    customRoles:
      type: array
      items:
        $ref: '#/definitions/CustomRoleId'
Members:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      $ref: '#/definitions/Member'
FeatureFlagConfig:
  type: object
  properties:
    'on':
      type: boolean
    archived:
      type: boolean
    salt:
      type: string
    sel:
      type: string
    lastModified:
      type: integer
      format: int64
    version:
      type: integer
    targets:
      type: array
      items:
        $ref: '#/definitions/Target'
    rules:
      type: array
      items:
        $ref: '#/definitions/Rule'
    fallthrough:
      type: object
      properties:
        variation:
          type: integer
        rollout:
          $ref: '#/definitions/Rollout'
Target:
  type: object
  properties:
    values:
      type: array
      items:
        type: string
    variation:
      type: integer
Rule:
  type: object
  properties:
    variation:
      type: integer
    rollout:
      $ref: '#/definitions/Rollout'
    clauses:
      type: array
      items:
        $ref: '#/definitions/Clause'
Rollout:
  type: object
  properties:
    variations:
      type: array
      items:
        $ref: '#/definitions/WeightedVariation'
WeightedVariation:
  type: object
  properties:
    variation:
      type: integer
    weight:
      type: integer
Clause:
  type: object
  properties:
    attribute:
      type: string
    op:
      type: string
    values:
      type: array
      items:
        type: string
    negate:
      type: boolean
Variation:
  type: object
  required:
    - value
  properties:
    name:
      type: string
    description:
      type: string
    value:
      type: object
FeatureFlagStatus:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    name:
      type: string
      description: |
        | Name     | Description |
        | --------:| ----------- |
        | new      | the feature flag was created within the last 7 days, and has not been requested yet |
        | active   | the feature flag was requested by your servers or clients within the last 7 days |
        | inactive | the feature flag was created more than 7 days ago, and hasn't been requested by your servers or clients within the past 7 days |
        | launched | one variation of the feature flag has been rolled out to all your users for at least 7 days |
      enum:
        - new
        - active
        - inactive
        - launched
    lastRequested:
      type: integer
      format: int64
    default:
      type: boolean
FeatureFlagStatuses:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: array
      items:
        $ref: '#/definitions/FeatureFlagStatus'
Project:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: array
      items:
        $ref: '#/definitions/Environment'
Projects:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _id:
      type: string
    key:
      type: string
    name:
      type: string
    items:
      type: array
      items:
        $ref: '#/definitions/Project'
Environment:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _id:
      type: string
      example: 57ae15fc40cda6071f6c242e
      description: The unique id for the environment
    key:
      type: string
      example: production
      description: The key for the environment
    name:
      type: string
      example: Production
      description: The name of the environment
    apiKey:
      type: string
      example: XXX
      description: The SDK key for backend LaunchDarkly SDKs
    mobileKey:
      type: string
      example: XXX
      description: The SDK key for mobile LaunchDarkly SDKs
    color:
      type: string
      example: 417505
      description: The swatch color for the environment
    defaultTtl:
      type: number
      example: 0
      description: The default TTL
    secureMode:
      type: boolean
      example: false
      description: Determines if this environment is in safe mode
User:
  type: object
  properties:
    lastPing:
      type: string
      format: int64
      example: '2015-03-03T02:37:22.492Z'
    environmentId:
      type: string
      example: 54ac2d97de674204ddd61096
    ownerId:
      type: string
      example: 573ca90604a444f18afd651a
    user:
      type: object
      example:
        key: a00bea
        name: Bob Loblaw
        custom:
          company: example.com
    avatar:
      type: string
Users:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    totalCount:
      type: number
      example: 3
    items:
      type: array
      items:
        $ref: '#/definitions/User'
AuditLogEntry:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _id:
      type: string
    date:
      type: integer
      format: int64
    kind:
      type: string
    name:
      type: string
    description:
      type: string
    member:
      $ref: '#/definitions/Member'
    titleVerb:
      type: string
    title:
      type: string
    target:
      type: object
      properties:
        _links:
          $ref: '#/definitions/Links'
        name:
          type: string
        resources:
          type: array
          items:
            type: string
AuditLogEntries:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: array
      items:
        $ref: '#/definitions/AuditLogEntry'
UserFlagSetting:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    _value:
      type: boolean
      description: The most important attribute in the response. The _value is the current setting for the user. For a boolean feature toggle, this will be true, false, or null if there is no defined fallthrough value.
      example: true
    setting:
      type: boolean
      description: The setting attribute indicates whether you've explicitly targeted this user to receive a particular variation. For example, if you have explicitly turned off a feature toggle for a user, setting will be false. A setting of null means that you haven't assigned that user to a specific variation.
      example: null
# This definition relies on it's "example" property to define it's structure.
UserFlagSettings:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      type: object
      example:
        sort.order:
          _links:
            self:
              href: /api/v2/users/lacuna/production/Abbie_Braun/flags/sort.order
              type: application/json
            _value: true
            setting: null
        alternate.page:
          _links:
            self:
              href: /api/v2/users/lacuna/production/Abbie_Braun/flags/alternate.page
              type: application/json
          _value: false,
          setting: null

Statements:
  type: array
  items:
    $ref: '#/definitions/Statement'
Statement:
  type: object
  properties:
    resources:
      $ref: '#/definitions/Resources'
    notresources:
      $ref: '#/definitions/Resources'
      description: Targeted resource will be those resources NOT in this list. The "resources`" field must be empty to use this field.
    actions:
      $ref: '#/definitions/Actions'
    notactions:
      $ref: '#/definitions/Actions'
      description: Targeted actions will be those actions NOT in this list. The "actions" field must be empty to use this field.
    effect:
      type: string
      enum:
        - allow
        - deny

Resources:
  type: array
  items:
    $ref: '#/definitions/Resource'

Resource:
  type: string
  description: A resource specifier string
  example: "proj/*:env/*:flag/my-flag"

Actions:
  type: array
  items:
    $ref: '#/definitions/Action'

Action:
  type: string
  description: An action to perform on a resource
  example: updateOn

NonOwnerRole:
  type: string
  enum:
    - writer
    - reader
    - admin

Role:
  type: string
  enum:
    - writer
    - reader
    - admin
    - owner

CustomRoleKeyOrId:
  type: string
  description: The 20-hexdigit id or the key for a custom role
  example: "revenue-team"

CustomRoleId:
  type: string
  description: The 20-hexdigit id or the key for a custom role
  example: "5721124f538714de2896338c"
CustomRole:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    name:
      type: string
      description: name of the custom role
      example: "revenue team"
    key:
      $ref: '#/definitions/CustomRoleKeyOrId'
    description:
      type: string
      description: description of the custom role
      example: "description of revenue team role here"
    _id:
      $ref: '#/definitions/Id'
    policy:
      type: array
      items:
        $ref: '#/definitions/Policy'
CustomRoles:
  type: object
  properties:
    _links:
      $ref: '#/definitions/Links'
    items:
      $ref: '#/definitions/CustomRole'
Policy:
  type: object
  properties:
    resources:
      $ref: '#/definitions/Resources'
    actions:
      $ref: '#/definitions/Actions'
    effect:
      type: string
      description: effect of the policy
      example: "deny"
Id:
  type: string
  description: the unique id
  example: "5a580a01b4ff89217bdf9dc1"
  


